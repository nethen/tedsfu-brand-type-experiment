import React, { useEffect, useRef, useState } from "react";

type Props = {};

const distSq = (x1: number, y1: number, x2: number, y2: number) => {
  return (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);
};

const clamp = (num: number, min: number, max: number) =>
  Math.min(Math.max(num, min), max);

const AnimatedPath = (props: any) => {
  const [progress, setProgress] = useState(0);
  const pathRef = useRef<HTMLElement>();

  useEffect(() => {
    const maxDistSq = 70000;

    const bounds = pathRef.current?.getBoundingClientRect() as DOMRect;
    const origin = {
      x: bounds.x + bounds.width / 2,
      y: bounds.y + bounds.height / 2,
    };

    const handleMouseMove = (e: MouseEvent) => {
      const distanceSq = distSq(origin.x, origin.y, e.clientX, e.clientY);
      // console.log(distanceSq / maxDistSq);
      const clampedProgress = clamp(distanceSq / maxDistSq, 0, 1);
      setProgress(clampedProgress);

      // non-clamped process
      // setProgress(distanceSq / maxDistSq);
    };

    window.addEventListener("mousemove", handleMouseMove);

    return () => {
      window.removeEventListener("mousemove", handleMouseMove);
    };
  }, [pathRef]);

  // reverse
  const strokeWidth = (1 - progress) * 2;

  // reverse
  // const strokeWidth = (1 - (1 - progress)) * 2;

  return (
    <path
      ref={pathRef}
      strokeWidth={strokeWidth}
      stroke={"black"}
      style={{
        opacity: strokeWidth > 2 ? 0.3 : 1,
        transitionProperty: "stroke-width, opacity",
        // transitionDuration: ".4s",
        transitionDuration: ".3s",
        transitionTimingFunction: "cubic-bezier(0.22, 1, 0.36, 1)",
      }}
      {...props}
    />
  );
};

const Logo = (props: Props) => {
  return (
    <svg
      style={{
        marginTop: "2vh",
        width: "100vw",
        height: "70vh",
      }}
      width="410"
      height="340"
      viewBox="0 0 410 340"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <AnimatedPath
        d="M75.7257 17.1731C75.4885 10.4142 73.5913 1.87661 65.1723 1.52088L59.2434 1.28373V0.572266H77.03V65.9085L38.6109 107.292H0.903198V106.699C6.83208 106.699 12.6424 103.26 16.1997 85.8296L30.3104 16.6988C32.5634 3.5367 27.1089 1.04657 21.18 1.04657V0.572266H34.3421L17.8598 86.3039C13.7096 103.498 22.4843 104.091 26.3974 104.091H27.9389C39.4409 104.091 50.4686 91.047 56.9904 84.1695C73.7099 66.2643 76.3186 61.8769 76.3186 44.3274L75.7257 17.1731Z"
        fill="white"
      />
      <AnimatedPath
        d="M59.2114 107.292V106.699C65.1403 106.699 70.832 103.26 76.4052 86.3039L103.559 3.06239C100.476 1.75804 96.4448 0.927998 91.1088 0.927998V0.572266H111.86L140.793 98.636H140.081C120.635 33.6554 120.516 33.4183 115.536 18.3589C113.876 13.3786 111.978 6.7383 104.271 3.29955L78.3024 86.4225C73.5593 103.616 78.421 106.699 84.3499 106.699V107.292H59.2114ZM125.852 0.927998V0.572266H146.603V96.0272H145.892C145.892 78.2406 145.536 32.5882 145.062 18.3589C144.824 11.2442 145.062 0.927998 125.852 0.927998Z"
        fill="white"
      />
      <AnimatedPath
        d="M142.158 107.292V106.699C148.087 106.699 153.778 103.26 159.589 86.4225L186.862 5.90825H187.573L161.367 87.1339C156.387 103.735 160.063 106.699 164.925 106.699V107.292H142.158ZM174.055 0.927998V0.572266H194.806V96.0272H194.213C194.213 78.2406 193.739 32.5882 193.265 18.3589C193.028 11.2442 193.265 0.927998 174.055 0.927998ZM193.265 107.292L227.771 5.90825H228.482L199.549 95.4344L193.265 107.292ZM214.965 0.927998V0.572266H235.716V96.0272H235.004C235.004 78.2406 234.648 32.5882 234.174 18.3589C233.937 11.2442 234.174 0.927998 214.965 0.927998Z"
        fill="white"
      />
      <AnimatedPath
        d="M255.424 0.572266H290.997V98.2802H290.523C290.286 91.2841 289.456 85.1181 288.626 82.3908C286.491 75.5133 280.325 72.9046 255.424 72.9046V71.7188H290.049C290.049 59.1496 289.337 24.5249 288.389 14.8016C287.084 8.51696 282.697 1.75804 267.282 1.52088L255.424 1.28373V0.572266ZM227.321 107.292V106.699C233.25 106.699 238.942 103.26 244.633 86.4225L272.262 3.29955H272.974L246.531 86.7782C241.55 103.616 245.938 106.699 251.274 106.699V107.292H227.321Z"
        fill="white"
      />
      <AnimatedPath
        d="M350.227 0.572266V18.3589H349.515C349.515 13.4972 349.16 12.43 347.737 9.46558C345.365 4.48532 340.385 1.75804 330.424 1.52088L321.294 1.28373C319.397 5.6711 315.839 17.0546 315.839 17.766L350.108 53.8136L350.227 95.4344H349.278C349.278 71.7188 348.092 51.9164 314.654 18.3589L320.582 0.572266H350.227ZM286.314 107.292V106.699C292.242 106.699 297.934 103.26 302.796 86.1853L316.907 36.1455H317.618L302.559 94.4857C301.254 105.158 318.804 106.936 336.59 106.936V107.292H286.314Z"
        fill="white"
      />
      <AnimatedPath
        d="M344.95 107.292V106.699C350.879 106.699 356.689 103.26 359.417 85.711L371.037 9.22843C371.63 2.11377 365.82 0.927998 359.891 0.927998V0.572266H373.883L361.551 85.711C359.535 103.379 364.99 106.699 370.919 106.699V107.292H344.95ZM372.104 42.0744V40.7701L400.563 0.572266H409.456C395.464 12.0743 378.27 34.0112 374.476 40.7701H409.456V90.0984H408.745C408.745 85.2367 408.271 72.786 407.085 58.5567C406.492 51.4421 406.018 42.6673 388.231 42.3116L372.104 42.0744Z"
        fill="white"
      />
      <AnimatedPath
        d="M114.688 223.292V222.699C120.617 222.699 126.427 219.26 129.629 201.83L144.569 120.13H145.281L131.645 201.83C129.154 219.379 134.609 222.699 140.538 222.699V223.292H114.688ZM120.735 117.165V116.572H168.759V146.217H168.285C168.285 142.896 168.166 130.446 163.898 125.347C159.866 120.367 155.834 117.877 142.554 117.639L120.735 117.165Z"
        fill="white"
      />
      <AnimatedPath
        d="M227.989 116.572H214.471V116.928C220.4 116.928 226.21 118.114 226.329 125.228L227.04 169.932H227.989V116.572ZM163.483 223.292V222.699C169.411 222.699 175.222 219.26 177.949 201.711L189.57 125.228C190.163 118.114 184.471 116.928 178.542 116.928V116.572H192.416L180.083 201.711C178.068 219.379 183.522 222.699 189.451 222.699V223.292H163.483ZM192.416 171.118V169.932H227.989V214.399H227.515C227.277 207.403 227.04 183.45 226.21 180.723C224.076 173.845 217.317 171.118 192.416 171.118Z"
        fill="white"
      />
      <AnimatedPath
        d="M229.59 223.292V222.699C235.518 222.699 241.329 219.26 244.175 201.711L257.693 118.944H258.404L252.475 159.735H279.867V176.691H279.511C279.274 172.185 278.918 169.102 277.376 166.493C274.293 161.039 266.704 160.446 252.357 160.446L246.19 201.711C244.056 219.379 249.511 222.581 255.44 222.581C255.44 222.581 256.388 222.699 261.724 222.581C279.867 222.106 280.341 221.395 285.914 204.794L290.657 190.683H291.013L282.12 223.292H229.59ZM241.21 116.928V116.572H299.906V146.217H299.55C299.55 142.896 299.432 130.446 295.163 125.347C291.013 120.367 287.1 117.877 273.819 117.639L241.21 116.928Z"
        fill="white"
      />
      <AnimatedPath
        d="M38.8272 339.292V338.699C44.7561 338.699 50.4478 335.26 56.2581 318.422L83.531 237.908H84.2424L58.0368 319.134C53.0565 335.735 56.7324 338.699 61.5941 338.699V339.292H38.8272ZM70.7246 232.928V232.572H91.4757V328.027H90.8828C90.8828 310.241 90.4085 264.588 89.9341 250.359C89.697 243.244 89.9341 232.928 70.7246 232.928ZM89.9341 339.292L124.44 237.908H125.152L96.2188 327.434L89.9341 339.292ZM111.634 232.928V232.572H132.385V328.027H131.673C131.673 310.241 131.318 264.588 130.843 250.359C130.606 243.244 130.843 232.928 111.634 232.928Z"
        fill="white"
      />
      <AnimatedPath
        d="M161.698 232.572H197.271V330.28H196.797C196.56 323.284 195.73 317.118 194.9 314.391C192.765 307.513 186.599 304.905 161.698 304.905V303.719H196.323C196.323 291.15 195.611 256.525 194.663 246.802C193.358 240.517 188.971 233.758 173.556 233.521L161.698 233.284V232.572ZM133.595 339.292V338.699C139.524 338.699 145.216 335.26 150.908 318.422L178.536 235.3H179.248L152.805 318.778C147.825 335.616 152.212 338.699 157.548 338.699V339.292H133.595Z"
        fill="white"
      />
      <AnimatedPath
        d="M238.477 232.572H262.43V268.146H262.074C261.718 259.964 261.6 258.185 260.77 250.596C259.347 236.13 261.007 233.639 238.477 232.928V232.572ZM192.825 339.292V338.699C198.754 338.699 204.445 335.26 210.137 318.422L238.003 234.944H238.714L214.643 310.833C209.188 327.79 224.604 338.699 238.596 338.699V339.292H192.825ZM220.928 318.067V317.711L262.43 290.201V330.28H261.956C260.058 286.881 260.77 294.826 220.928 318.067Z"
        fill="white"
      />
      <AnimatedPath
        d="M265.584 339.292V338.699C271.513 338.699 277.323 335.26 280.05 317.711L291.908 241.228C292.619 234.114 286.809 232.928 280.88 232.928V232.572H307.204V232.928C301.276 232.928 295.465 234.232 294.28 241.228L282.422 317.711C280.169 335.379 285.623 338.699 291.552 338.699V339.292H265.584Z"
        fill="white"
      />
      <AnimatedPath
        d="M297.41 339.292V338.699C303.339 338.699 309.149 335.26 311.995 317.711L312.351 315.695L325.868 232.572H367.845V262.217H367.252C367.252 247.513 365.236 234.114 346.619 233.639C329.781 233.995 325.631 241.94 322.43 261.387L314.129 317.711C311.995 335.379 317.449 338.581 323.378 338.581C323.378 338.581 324.327 338.699 329.544 338.581C347.805 338.106 348.28 337.395 353.853 320.794L358.596 306.683H358.952L350.058 339.292H297.41Z"
        fill="white"
      />
    </svg>
  );
};

export default Logo;
